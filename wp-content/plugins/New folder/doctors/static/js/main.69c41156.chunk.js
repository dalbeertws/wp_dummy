(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t,a){},164:function(e,t,a){e.exports=a(349)},349:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(12),l=a.n(c),r=(a(113),a(88)),s=a(89),o=a(91),d=a(90),u=a(92),h=a(66),m=a.n(h),p=a(37),f=a(355),y=a(356),v=a(357),E=a(14),b=a(352),k=a(353),g=a(351),S=a(350),C=a(65),O=a(354),w=(a(338),y.a.SubMenu,v.a.Header,v.a.Footer,v.a.Sider,v.a.Content,b.a.Dragger,C.a.Option),x=C.a.OptGroup;function D(){return Object.keys(schedule.clinicData)}function I(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].indexOf(e)}var j=function(e){function t(e){var a,n,i;Object(r.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).schedule=[];for(var c=0,l=[0,1,2,3,4,5,6];c<l.length;c++){var s=l[c];for(n=[],i=m()().set("hour",6).set("minute",0).set("second",0).set("millisecond",0);i.hour()<19;)n.push({start:i,end:i.add(15,"minute"),selected:!1}),i=i.add(15,"minute");a.schedule[s]=n}return a.schedule[0]=[],a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"export",value:function(){var e=D(),t={};e.forEach(function(e){t[e]={}});for(var a=0;a<7;a++)this["day_".concat(a)].export();return t}},{key:"render",value:function(){var e=this,t=schedule[this.props.doctorId];t.clinics=t.clinics||{};var a=Object.keys(t.clinics);return this.props.show?i.a.createElement("table",{cellPadding:"10"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(A,{key:"0",day:"Sunday",doctor:this.props.doctorId,ref:function(t){e.day_0=t},clinic:a.find(function(e){return t.clinics[e][0]})})),i.a.createElement("td",null,i.a.createElement(A,{key:"1",day:"Monday",ref:function(t){e.day_1=t},doctor:this.props.doctorId,clinic:a.find(function(e){return t.clinics[e][1]})})),i.a.createElement("td",null,i.a.createElement(A,{key:"2",day:"Tuesday",ref:function(t){e.day_2=t},doctor:this.props.doctorId,clinic:a.find(function(e){return t.clinics[e][2]})})),i.a.createElement("td",null,i.a.createElement(A,{key:"3",day:"Wednesday",ref:function(t){e.day_3=t},doctor:this.props.doctorId,clinic:a.find(function(e){return t.clinics[e][3]})})),i.a.createElement("td",null,i.a.createElement(A,{key:"4",day:"Thursday",ref:function(t){e.day_4=t},doctor:this.props.doctorId,clinic:a.find(function(e){return t.clinics[e][4]})})),i.a.createElement("td",null,i.a.createElement(A,{key:"5",day:"Friday",ref:function(t){e.day_5=t},clinic:a.find(function(e){return t.clinics[e][5]})})),i.a.createElement("td",null,i.a.createElement(A,{key:"6",day:"Saturday",ref:function(t){e.day_6=t},doctor:this.props.doctorId,clinic:a.find(function(e){return t.clinics[e][6]})}))))):""}}]),t}(i.a.Component),_=function(e,t){return e.start.toJSON()===t.start.toJSON()},A=function(e){function t(e){var a;Object(r.a)(this,t),a=Object(o.a)(this,Object(d.a)(t).call(this,e));for(var n,i=[],c=m()().set("hour",6).set("minute",0).set("second",0).set("millisecond",0);c.hour()<19;)i.push({start:c,end:c.add(15,"minute"),selected:!1}),c=c.add(15,"minute");var l,s,u,h,p=I(a.props.day);try{var f,y=schedule[a.props.doctor];if(y){var v=y.clinics[a.props.clinic];v&&(f=v[p])&&f.hours&&f.hours.forEach(function(e){if(h={},e.start)for(l=e.start.split(":").map(function(e){return parseInt(e)}),s=l[0],u=l[1],h.start=m()().set("hour",s).set("minute",u).set("second",0).set("millisecond",0),l=e.end.split(":").map(function(e){return parseInt(e)}),s=l[0],u=l[1],h.end=m()().set("hour",s).set("minute",u).set("second",0).set("millisecond",0),n=0;n<i.length;n++)_(i[n],h)&&(i[n].selected=!0)})}}catch(E){}return a.state={slots:i,clinic:a.props.clinic},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"export",value:function(){return{clinic:this.state.clinic,slots:this.state.slots}}},{key:"setClinic",value:function(e,t,a){this.setState({clinic:t})}},{key:"toggleSelected",value:function(e,t){var a=this.state.slots.findIndex(function(t){return t.start===e.start});this.state.slots[a]={start:e.start,end:e.end,selected:!e.selected},this.setState({slots:this.state.slots});I(t.day)}},{key:"render",value:function(){var e=this,t=this.props.clinic?this.props.clinic:"",a=this.state.slots.map(function(t){var a=I(e.props.day)+" "+t.start.format("HH:mm");return i.a.createElement("div",{style:{whiteSpace:"nowrap",padding:"3px 25px 3px 25px",border:"solid 1px black",cursor:"pointer",userSelect:"none",backgroundColor:t.selected?"yellow":"#dddd"},key:a,className:t.selected?"slot selected":"",id:a,onClick:e.toggleSelected.bind(e,t,e.props)},t.start.format("HH:mm")," - ",t.end.format("HH:mm"))}),n=D().map(function(e){return i.a.createElement(w,{value:e,key:e},schedule.clinicData[e].name)});return i.a.createElement("div",null,i.a.createElement("h3",{align:"center"},this.props.day),i.a.createElement(C.a,{defaultValue:t,style:{width:150},onChange:this.setClinic.bind(this,this.props)},i.a.createElement(x,{label:"Clinic"},i.a.createElement(w,{value:""},"---"),n)),i.a.createElement("hr",null),a)}}]),t}(i.a.Component),N=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).showModal=function(){return a.setState({visible:!0})},a.showClinicsModal=function(){return a.setState({clinicsVisible:!0})},a.handleOk=function(e){a.addDoctor(a.doctorNameInput.input.value,a.doctorIdInput.input.value),a.setState({visible:!1})},a.handleEditClinicsOk=function(e){var t,n=$("[id^=clinic_]").get().map(function(e){return{id:$(e).attr("id").replace("clinic_",""),name:$(e).attr("value")}}),i=!0,c=!1,l=void 0;try{for(var r,s=n[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var o=r.value;schedule.clinicData[o.id].name,t=o.name,schedule.clinicData[o.id].name=t}}catch(d){c=!0,l=d}finally{try{i||null==s.return||s.return()}finally{if(c)throw l}}try{saveSchedule()}catch(e){console.log(e)}a.setState({clinicsVisible:!1})},a.handleCancel=function(e){a.setState({visible:!1,clinicsVisible:!1})},a.state={loading:!1,step:"one",doctor:{title:"Doctor 3"}},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"save",value:function(){var e,t,a={},n=$(".ant-select-selection-selected-value").get().map(function(e){return $(e).attr("title")});for(var i in n)(e=n[i]).match(/\w/)&&(a[e]||(a[e]={}),t=$('.slot.selected[id^="'+i+' "]').get().map(function(e){var t=$(e).text().split(" - ");return{start:t[0],end:t[1]}}),a[e][""+i]={hours:t});var c=$(".ant-list-item-meta-description").text();schedule[c].clinics=a;try{saveSchedule()}catch(l){}}},{key:"setStep",value:function(e){this.setState({step:e})}},{key:"setDoctor",value:function(e){this.setState({doctor:e}),this.setStep("two")}},{key:"onToggleDoctor",value:function(e,t){schedule[e.id].disabled=!t,this.setState({schedule:schedule}),saveSchedule()}},{key:"addDoctor",value:function(e,t){try{schedule[t]={nickname:e,clinics:{}},["085e44a4-0a52-45c7-bee6-28ce61a3c42a","53CF3389-6555-43D2-9D17-9890841F5BCA"].forEach(function(e){schedule[t].clinics[e]={}}),this.setState({doctor:t}),saveSchedule()}catch(a){console.log(a.stack)}}},{key:"deleteDoctor",value:function(e,t){confirm("Delete ".concat(t," ?"))&&(delete schedule[e],this.setState({doctor:null,step:"one"}),saveSchedule())}},{key:"getAvatar",value:function(e){try{var t=e.fileList[e.fileList.length-1].originFileObj,a=new FileReader,n=this;a.onload=function(){var e=a.result;n.setAvatar(e)},a.readAsDataURL(t)}catch(i){}}},{key:"setAvatar",value:function(e){var t=this.state.doctor.id;schedule[t].avatar=e,this.setState({avatar:e})}},{key:"render",value:function(){for(var e,t=this,a=0,n=Object.keys(schedule);a<n.length;a++)e=n[a],"false"===schedule[e].disabled&&(schedule[e].disabled=!1),console.log(e),console.log(schedule[e].disabled);var c=Object.keys(schedule).filter(function(e){return"clinicData"!==e}).map(function(e){var t=schedule[e];return{id:e,disabled:t.disabled,title:t.nickname,clinics:t.clinics}});"one"!==this.state.step&&(c=c.filter(function(e){return e.id===t.state.doctor.id}));var l="one"===this.state.step?i.a.createElement("div",null,i.a.createElement(p.a,{type:"primary",onClick:this.showModal},"Add Doctor"),i.a.createElement(O.a,{title:"Add Doctor",visible:this.state.visible,onOk:this.handleOk.bind(this),onCancel:this.handleCancel.bind(this)},i.a.createElement(f.a,{prefix:i.a.createElement(E.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),ref:function(e){t.doctorNameInput=e},placeholder:"Doctor Name"}),i.a.createElement(f.a,{prefix:i.a.createElement(E.a,{type:"id",style:{color:"rgba(0,0,0,.25)"}}),type:"id",ref:function(e){t.doctorIdInput=e},style:{marginTop:"10px"},placeholder:"Doctor ID"})),i.a.createElement(p.a,{type:"primary",onClick:this.showClinicsModal,style:{marginLeft:"10px"}},"Edit Clinics"),i.a.createElement(O.a,{title:"Edit Clinics",visible:this.state.clinicsVisible,onOk:this.handleEditClinicsOk.bind(this),onCancel:this.handleCancel.bind(this)},Object.keys(schedule.clinicData).map(function(e){return i.a.createElement("div",{key:"div_"+e},i.a.createElement("p",null,e),i.a.createElement(f.a,{className:"clinic",id:"clinic_"+e,style:{marginBottom:"10px"},prefix:i.a.createElement(E.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Clinic Name",defaultValue:schedule.clinicData[e].name}))}))):i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(p.a,{type:"primary",onClick:this.setStep.bind(this,"one")},i.a.createElement(E.a,{type:"left"}),"Go back")),i.a.createElement("td",null,i.a.createElement(b.a,{name:"file",style:{display:"inline"},showUploadList:"false",onChange:this.getAvatar.bind(this)},i.a.createElement(p.a,{type:"primary"},i.a.createElement(E.a,{type:"upload"})," Change Photo"))),i.a.createElement("td",null,i.a.createElement(p.a,{type:"primary",onClick:this.save.bind(this)},"Save",i.a.createElement(E.a,{type:"save"})))))),r=i.a.createElement("div",null,l,i.a.createElement(k.a,{itemLayout:"horizontal",dataSource:c,renderItem:function(e){return i.a.createElement("div",null,i.a.createElement(k.a.Item,null,i.a.createElement(E.a,{type:"delete",style:"one"===t.state.step?{margin:"0px 0px 10px"}:{display:"none"},onClick:t.deleteDoctor.bind(t,e.id,e.title)}),i.a.createElement(S.a,{size:"small",style:"one"===t.state.step?{margin:"0px 10px 12px"}:{display:"none"},defaultChecked:!schedule[e.id].disabled,onChange:t.onToggleDoctor.bind(t,e)}),i.a.createElement(k.a.Item.Meta,{avatar:i.a.createElement(g.a,{src:schedule[e.id].avatar}),title:e.title,description:e.id,onClick:schedule[e.id].disabled?null:t.setDoctor.bind(t,e)})),i.a.createElement(j,{doctorId:e.id,show:"two"===t.state.step,ref:function(a){t["schedule_".concat(e.id)]=a}}))}}));return i.a.createElement("div",{className:"App"},r)}}]),t}(i.a.Component),M=N;l.a.render(i.a.createElement(N,null),document.getElementById("root"));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[164,1,2]]]);
//# sourceMappingURL=main.69c41156.chunk.js.map